<!--
	Copyright The Total RP 3 Extended Authors
	SPDX-License-Identifier: Apache-2.0
-->
<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/
https://raw.githubusercontent.com/Meorawr/wow-ui-schema/main/UI.xsd">
	<GameTooltip name="TRP3_ItemTooltip" frameStrata="TOOLTIP" hidden="false" parent="UIParent" inherits="TRP3_TooltipTemplate"/>


	<Include file="ItemsChatLinkModule.lua"/>

	<Include file="DB.lua"/>
	<Include file="InventoryEffects.lua"/>
	<Include file="InventoryUtils.lua"/>
	<Include file="Inventory.lua"/>
	<Include file="Container.lua"/>
	<Include file="InventoryPage.lua"/>
	<Include file="InventoryItemConfig.xml"/>
	<Include file="InventoryScene.xml"/>
	<Include file="InventorySlot.xml"/>

	<Button name="TRP3_QuestButtonTemplate" virtual="true">
		<Size x="37" y="37"/>

		<Layers>
			<Layer level="BORDER">
				<Texture parentKey="Icon">
					<Size x="36" y="36"/>
					<Anchors>
						<Anchor point="CENTER"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="HIGHLIGHT">
				<Texture file="Interface\ContainerFrame\UI-Icon-QuestBorder" alpha="0.85">
					<Size x="38" y="38"/>
					<Anchors>
						<Anchor point="CENTER"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="OVERLAY">
				<Texture parentKey="ActiveTexture" file="Interface\Spellbook\Spellbook-Parts">
					<Size x="70" y="65"/>
					<TexCoords left="0.00390625" right="0.27734375" top="0.44140625" bottom="0.69531250"/>
					<Anchors>
						<Anchor point="CENTER" x="1.5"/>
					</Anchors>
				</Texture>
				<Texture parentKey="Completed" file="Interface\RAIDFRAME\ReadyCheck-Ready" hidden="true">
					<Size x="38" y="38"/>
					<Anchors>
						<Anchor point="CENTER" x="0" y="0"/>
					</Anchors>
				</Texture>
				<FontString parentKey="Name" inherits="SystemFont_Large" justifyH="LEFT" text="[TEXT_NAME]">
					<Size x="300" y="0"/>
					<Anchors>
						<Anchor point="TOPLEFT" relativePoint="TOPRIGHT" x="15" y="-4"/>
					</Anchors>
					<Color r="0.95" g="0.95" b="0.95"/>
				</FontString>
				<FontString parentKey="InfoText" inherits="SystemFont_Med1" maxLines="2" justifyH="LEFT" justifyV="TOP">
					<Size x="360" y="0"/>
					<Anchors>
						<Anchor point="TOPLEFT" relativeKey="$parent.Name" relativePoint="BOTTOMLEFT" x="0" y="-1"/>
					</Anchors>
					<Color r="0.95" g="0.95" b="0.95"/>
				</FontString>
			</Layer>
		</Layers>
		<Scripts>
			<OnEnter>
					TRP3_RefreshTooltipForFrame(self);
			</OnEnter>
			<OnLeave>
					TRP3_MainTooltip:Hide();
			</OnLeave>
		</Scripts>
		<PushedTexture file="Interface\Buttons\UI-Quickslot-Depress"/>
		<HighlightTexture file="Interface\Buttons\ButtonHilight-Square" alphaMode="ADD" parentKey="highlightTexture"/>
	</Button>

	<!-- *_*_*_*_*_*_*_*_*_*  -->
	<!--      Containers      -->
	<!-- *_*_*_*_*_*_*_*_*_*  -->

	<Button name="TRP3_ContainerSlotTemplate" inherits="InsecureActionButtonTemplate" enableMouse="true" virtual="true">
		<Size x="36" y="36"/>
		<Layers>
			<Layer level="BORDER">
				<Texture parentKey="Icon">
					<Size x="36" y="36"/>
					<Anchors>
						<Anchor point="CENTER" x="0" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="ARTWORK">
				<Texture parentKey="Quest" file="Interface\ContainerFrame\UI-Icon-QuestBang">
					<Size x="36" y="36"/>
					<Anchors>
						<Anchor point="CENTER" x="0" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="OVERLAY">
				<FontString parentKey="Quantity" inherits="NumberFontNormal" justifyH="RIGHT" hidden="true">
					<Anchors>
						<Anchor point="BOTTOMRIGHT" x="-5" y="2"/>
					</Anchors>
				</FontString>
				<FontString parentKey="Cooldown" inherits="NumberFontNormal" justifyH="LEFT" hidden="true">
					<Anchors>
						<Anchor point="TOPLEFT" x="5" y="-2"/>
					</Anchors>
				</FontString>
				<Texture parentKey="IconBorder" file="Interface\Common\WhiteIconFrame" hidden="false" setAllPoints="true"/>
				<Texture parentKey="Container" file="Interface\ContainerFrame\UI-Icon-QuestBorder" alpha="0.7" hidden="true">
					<Size x="36" y="36"/>
					<Anchors>
						<Anchor point="CENTER" x="0" y="0"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<PushedTexture file="Interface\Buttons\UI-Quickslot-Depress"/>
		<HighlightTexture alphaMode="ADD" file="Interface\Buttons\ButtonHilight-Square"/>
	</Button>

	<Button name="TRP3_ItemDragButton" inherits="TRP3_ContainerSlotTemplate" parent="UIParent" frameStrata="DIALOG" hidden="true" movable="true" enableMouse="false">

	</Button>

	<Frame name="TRP3_Container5x4Template" frameStrata="HIGH" toplevel="true" enableMouse="true" virtual="true" hidden="true" clampedToScreen="true" movable="true">
		<Size x="200" y="270" />
		<Layers>
			<Layer level="BACKGROUND">
				<Texture parentKey="Icon">
					<Size x="40" y="40" />
					<Anchors>
						<Anchor  point="CENTER" relativePoint="TOPLEFT" x="27" y="-27"/>
					</Anchors>
				</Texture>
				<MaskTexture parentKey="IconMask" file="Interface\CharacterFrame\TempPortraitAlphaMask" hWrapMode="CLAMPTOBLACKADDITIVE" vWrapMode="CLAMPTOBLACKADDITIVE">
					<Anchors>
						<Anchor point="TOPLEFT" relativeKey="$parent.Icon" x="2" y="-2"/>
						<Anchor point="BOTTOMRIGHT" relativeKey="$parent.Icon" x="-2" y="2"/>
					</Anchors>
					<MaskedTextures>
						<MaskedTexture childKey="Icon"/>
					</MaskedTextures>
				</MaskTexture>
			</Layer>
			<Layer level="BORDER" textureSubLevel="0">
				<Texture parentKey="Top" file="Interface\ContainerFrame\UI-Bag-Components">
					<Size x="0" y="100" />
					<Anchors>
						<Anchor point="TOPLEFT" x="0" y="0"/>
						<Anchor point="TOPRIGHT" x="0" y="0"/>
					</Anchors>
					<TexCoords left="0.24" right="1" top="0" bottom="0.18"/>
				</Texture>
				<Texture parentKey="LockIcon" file="Interface\PETBATTLES\PetBattle-LockIcon">
					<Size x="20" y="20" />
					<Anchors>
						<Anchor point="BOTTOM" relativePoint="TOP" x="5" y="-4"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="BORDER" textureSubLevel="2">
				<Texture parentKey="Bottom" file="Interface\ContainerFrame\UI-Bag-Components">
					<Size x="0" y="10" />
					<Anchors>
						<Anchor point="BOTTOMLEFT" x="0" y="0"/>
						<Anchor point="BOTTOMRIGHT" x="0" y="0"/>
					</Anchors>
					<TexCoords left="0.24" right="1" top="0.33" bottom="0.348"/>
				</Texture>
			</Layer>
			<Layer level="BORDER" textureSubLevel="1">
				<Texture parentKey="Middle" file="Interface\ContainerFrame\UI-Bag-Components">
					<Anchors>
						<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeKey="$parent.Top" x="0" y="0"/>
						<Anchor point="TOPRIGHT" relativePoint="BOTTOMRIGHT" relativeKey="$parent.Top" x="0" y="0"/>
						<Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT" relativeKey="$parent.Bottom" x="0" y="0"/>
						<Anchor point="BOTTOMRIGHT" relativePoint="TOPRIGHT" relativeKey="$parent.Bottom" x="0" y="0"/>
					</Anchors>
					<TexCoords left="0.24" right="1" top="0.43" bottom="0.735"/>
				</Texture>
			</Layer>
			<Layer level="BORDER" textureSubLevel="3">
				<Texture parentKey="Token" file="Interface\ContainerFrame\UI-Backpack-TokenFrame">
					<Size x="0" y="34" />
					<Anchors>
						<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeKey="$parent.Bottom" x="11" y="6"/>
						<Anchor point="TOPRIGHT" relativePoint="BOTTOMRIGHT" relativeKey="$parent.Bottom" x="-1" y="6"/>
					</Anchors>
					<TexCoords left="0" right="0.71" top="0" bottom="1"/>
				</Texture>
			</Layer>

			<Layer level="OVERLAY">
				<FontString parentKey="Title" inherits="GameFontNormal" justifyH="CENTER" justifyV="MIDDLE" text="[[BAG NAME]]">
					<Size x="0" y="20"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="52" y="-9"/>
						<Anchor point="TOPRIGHT" x="-35" y="-9"/>
					</Anchors>
					<Color r="0.95" g="0.95" b="0.95"/>
				</FontString>
				<FontString parentKey="DurabilityText" inherits="GameFontNormalSmall" justifyH="LEFT" justifyV="MIDDLE" text="[[x/x]]">
					<Size x="0" y="20"/>
					<Anchors>
						<Anchor point="LEFT" relativeKey="$parent.Token" x="13" y="1"/>
						<Anchor point="RIGHT" relativeKey="$parent.Token" x="-12" y="1"/>
					</Anchors>
					<Color r="0.95" g="0.95" b="0.95"/>
				</FontString>
				<FontString parentKey="WeightText" inherits="GameFontNormalSmall" justifyH="RIGHT" justifyV="MIDDLE" text="[[x/x]]">
					<Size x="0" y="20"/>
					<Anchors>
						<Anchor point="LEFT" relativeKey="$parent.Token" x="13" y="1"/>
						<Anchor point="RIGHT" relativeKey="$parent.Token" x="-12" y="1"/>
					</Anchors>
					<Color r="0.95" g="0.95" b="0.95"/>
				</FontString>
			</Layer>
		</Layers>

		<Scripts>
			<OnLoad>
				self.IconButton:SetAllPoints(self.Icon);
			</OnLoad>
		</Scripts>

		<Frames>
			<Button inherits="UIPanelCloseButton" parentKey="close">
				<Anchors>
					<Anchor point="TOPRIGHT" x="-5" y="-9"/>
				</Anchors>
			</Button>
			<Button parentKey="IconButton" inherits="TRP3_InvisibleButton"/>
			<Frame parentKey="Glow" hidden="true" setAllPoints="true" alpha="0.5">
				<Layers>
					<Layer level="ARTWORK">
						<Texture inherits="HelpPlateArrowDOWN">
							<Size x="53" y="21"/>
							<Anchors>
								<Anchor point="BOTTOM" relativePoint="TOP" x="5" y="-15"/>
							</Anchors>
						</Texture>
						<Texture inherits="HelpPlateArrowUP">
							<Size x="53" y="21"/>
							<Anchors>
								<Anchor point="TOP" relativePoint="BOTTOM" x="5" y="-15"/>
							</Anchors>
						</Texture>
					</Layer>
				</Layers>
			</Frame>
		</Frames>
	</Frame>

	<Frame name="TRP3_Container2x4Template" inherits="TRP3_Container5x4Template" virtual="true" >
		<Anchors>
			<Anchor point="CENTER" x="0" y="0"/>
		</Anchors>
		<Size x="200" y="144" />
		<Scripts>
			<OnLoad>
				self.Middle:SetTexCoord(0.24, 1, 0.43, 0.4875);
				self.IconButton:SetAllPoints(self.Icon);
			</OnLoad>
		</Scripts>
	</Frame>

	<Frame name="TRP3_Container1x4Template" inherits="TRP3_Container5x4Template" virtual="true" >
		<Anchors>
			<Anchor point="CENTER" x="0" y="0"/>
		</Anchors>
		<Size x="200" y="103" />
		<Scripts>
			<OnLoad>
				self.Middle:SetTexCoord(0.24, 1, 0.43, 0.4);
				self.IconButton:SetAllPoints(self.Icon);
			</OnLoad>
		</Scripts>
	</Frame>

	<!-- *_*_*_*_*_*_*_*_*_*  -->
	<!--    Inventory page    -->
	<!-- *_*_*_*_*_*_*_*_*_*  -->

	<Frame name="TRP3_InventoryPageSlotColumnTemplate" inherits="VerticalLayoutFrame" virtual="true">
		<Size x="36" y="36"/>
	</Frame>

	<!-- Inventory -->
	<Frame name="TRP3_InventoryPage" hidden="true" inherits="TRP3_StandardParchmentFrame" mixin="TRP3_InventoryPageMixin">
		<Frames>
			<ModelScene parentKey="Model" inherits="TRP3_InnerFrame,TRP3_InventorySceneTemplate">
				<Size x="350" y="350"/>
				<Anchors>
					<Anchor point="TOPLEFT" x="100" y="-100"/>
					<Anchor point="BOTTOMRIGHT" x="-100" y="100"/>
				</Anchors>
			</ModelScene>
			<Frame parentKey="InventoryLeft" inherits="TRP3_InventoryPageSlotColumnTemplate">
				<Anchors>
					<Anchor point="TOPRIGHT" relativeKey="$parent.Model" relativePoint="TOPLEFT" x="-8"/>
					<Anchor point="BOTTOMRIGHT" relativeKey="$parent.Model" relativePoint="BOTTOMLEFT" x="-8"/>
				</Anchors>
			</Frame>
			<Frame parentKey="InventoryRight" inherits="TRP3_InventoryPageSlotColumnTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent.Model" relativePoint="TOPRIGHT" x="8"/>
					<Anchor point="BOTTOMLEFT" relativeKey="$parent.Model" relativePoint="BOTTOMRIGHT" x="8"/>
				</Anchors>
			</Frame>
			<Frame parentKey="ItemConfig" inherits="TRP3_InventoryItemConfigPanelTemplate">
				<Anchors>
					<Anchor point="LEFT" relativePoint="RIGHT" x="13"/>
				</Anchors>
			</Frame>
		</Frames>
		<Scripts>
			<OnLoad method="OnLoad"/>
		</Scripts>
	</Frame>

	<Frame name="TRP3_InspectionFrame" inherits="TRP3_StandardParchmentFrame" parent="UIParent" movable="true" enableMouse="true" toplevel="true" hidden="true">
		<Size x="520" y="480" />
		<Anchors>
			<Anchor point="CENTER" x="0" y="0"/>
		</Anchors>
		<Scripts>
			<OnLoad inherit="prepend">
				tinsert(UISpecialFrames, self:GetName());
			</OnLoad>
		</Scripts>
		<Frames>

			<Frame parentKey="Main" inherits="TRP3_TooltipBackdropTemplate">
				<!--<Backdrop edgeFile="Interface\Tooltips\UI-Tooltip-Border" bgFile="Interface\DialogFrame\UI-DialogBox-Background" tile="false">
					<EdgeSize><AbsValue val="24"/></EdgeSize>
					<BackgroundInsets left="5" right="5" top="5" bottom="5"/>
				</Backdrop>-->
				<KeyValues>
					<KeyValue key="backdropBorderColor" value="TRP3_BACKDROP_COLOR_CREAMY_BROWN" type="global"/>
				</KeyValues>

				<Size x="350" y="375" />
				<Anchors>
					<Anchor point="CENTER" x="0" y="0"/>
				</Anchors>

				<Frames>
					<ModelScene name="$parentModel" parentKey="Model" inherits="TRP3_InventorySceneTemplate"/>
				</Frames>
			</Frame>

			<Button inherits="UIPanelCloseButton" parentKey="close">
				<Anchors>
					<Anchor point="TOPRIGHT" x="-10" y="-10"/>
				</Anchors>
				<Scripts>
					<OnClick>
						self:GetParent():Hide();
					</OnClick>
				</Scripts>
			</Button>

		</Frames>
	</Frame>

	<Include file="Inspection.lua"/>

	<Include file="InventoryExchange.xml"/>
	<Include file="InventoryExchange.lua"/>

	<Include file="InventoryDrop.xml"/>
	<Include file="InventoryDrop.lua"/>

	<Include file="InventoryMapScan\InventoryMapScan.xml"/>

</Ui>
